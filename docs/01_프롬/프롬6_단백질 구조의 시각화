
ëª©ì  : ë‹¨ë°±ì§ˆ êµ¬ì¡°ì˜ ì‹œê°í™” 
input : ë‹¨ë°±ì§ˆ ë¬¸ìì—´
í™˜ê²½ : react
ë°©ë²• : 3Dmol.js ì‚¬ìš©

===

ì €ëŠ” React í™˜ê²½ì—ì„œ ë‹¨ë°±ì§ˆ êµ¬ì¡° ì‹œê°í™” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ê³  í•©ë‹ˆë‹¤.

**ëª©í‘œ:** PDB ID (ë‹¨ë°±ì§ˆ ë¬¸ìì—´)ë¥¼ ì…ë ¥ë°›ì•„ 3ì°¨ì› ë‹¨ë°±ì§ˆ êµ¬ì¡°ë¥¼ ì›¹ì—ì„œ ì‹œê°í™”í•˜ëŠ” React ì»´í¬ë„ŒíŠ¸ ê°œë°œ.

**ì£¼ìš” í™˜ê²½ ë° ë„êµ¬:**
1.  **í”„ë ˆì„ì›Œí¬:** React (í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©)
2.  **ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬:** 3Dmol.js

**ìš”ì²­ ì‚¬í•­:**
ì•„ë˜ ì¡°ê±´ì„ ëª¨ë‘ ì¶©ì¡±í•˜ëŠ” **React í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì½”ë“œ(`ProteinViewer.jsx`)**ë¥¼ ì‘ì„±í•´ ì£¼ì‹­ì‹œì˜¤.
+í•„ìš”í•œ api ë¥¼ ì–‘ì‹í™”í•´ì„œ ë¬¸ì„œí™”


1.  **ë°ì´í„° ë¶„ë¦¬:** ì»´í¬ë„ŒíŠ¸ëŠ” ì‹œê°í™”í•  ë‹¨ë°±ì§ˆì˜ **PDB ID**ë¥¼ `props`ë¡œ ì „ë‹¬ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
2.  **3Dmol.js ì´ˆê¸°í™”:** Reactì˜ `useRef` í›…ì„ ì‚¬ìš©í•˜ì—¬ ë·°ì–´ê°€ ë Œë”ë§ë  DOM ìš”ì†Œë¥¼ ì§€ì •í•˜ê³ , `3Dmol.createWebGLViewer` í•¨ìˆ˜ë¡œ ë·°ì–´ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
3.  **ìƒëª…ì£¼ê¸° ê´€ë¦¬:** `useEffect` í›…ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒì„ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
    * ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ë·°ì–´ ì´ˆê¸°í™” ë° `props`ë¡œ ë°›ì€ PDB IDì˜ êµ¬ì¡°ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
    * **PDB IDê°€ ë³€ê²½**ë  ë•Œë§ˆë‹¤ ë·°ì–´ ìƒíƒœë¥¼ ê°±ì‹ í•˜ê³  ìƒˆë¡œìš´ êµ¬ì¡°ë¥¼ ë‹¤ì‹œ ë¡œë“œí•©ë‹ˆë‹¤.
    * ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë·°ì–´ë¥¼ ì •ë¦¬(clean-up)í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
4.  **ì‹œê°í™” ìŠ¤íƒ€ì¼:** ë¡œë“œëœ ë‹¨ë°±ì§ˆì€ ê°€ì¥ ì¼ë°˜ì ì¸ **ì¹´íˆ°(Cartoon) í˜•íƒœ**ë¡œ í‘œì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

---

# ğŸš€ êµ¬í˜„ ê²°ê³¼ (Implementation Status)

## 1. 3Dmol.js ì„¤ì • (CDN ë°©ì‹)
WSL í™˜ê²½ í˜¸í™˜ì„± ë° ì•ˆì •ì„±ì„ ìœ„í•´ npm íŒ¨í‚¤ì§€ ëŒ€ì‹  CDN ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤.

**`index.html`**
```html
<head>
    <!-- ... -->
    <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
</head>
```

## 2. ProteinViewer ì»´í¬ë„ŒíŠ¸
`src/components/ProteinViewer.jsx`

```jsx
import React, { useEffect, useRef, useState } from 'react';

const ProteinViewer = ({ pdbId, width = '100%', height = '400px', style = {} }) => {
    const viewerRef = useRef(null);
    const [viewer, setViewer] = useState(null);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);

    // Initialize Viewer
    useEffect(() => {
        if (!viewerRef.current) return;

        // Check if 3Dmol is loaded via CDN
        if (!window.$3Dmol) {
            setError("3Dmol.js library not loaded");
            return;
        }

        const element = viewerRef.current;
        const config = { backgroundColor: 'white' };
        const v = window.$3Dmol.createWebGLViewer(element, config);
        setViewer(v);

        return () => {
            if (v) v.clear();
        };
    }, []);

    // Load PDB Data
    useEffect(() => {
        if (!viewer || !pdbId) return;

        const loadStructure = async () => {
            setLoading(true);
            setError(null);
            try {
                const response = await fetch(`https://files.rcsb.org/download/${pdbId}.pdb`);
                if (!response.ok) throw new Error(`Failed to fetch PDB data for ID: ${pdbId}`);
                const pdbData = await response.text();

                viewer.clear();
                viewer.addModel(pdbData, "pdb");
                viewer.setStyle({}, { cartoon: { color: 'spectrum' } });
                viewer.zoomTo();
                viewer.render();
            } catch (err) {
                console.error("Error loading protein structure:", err);
                setError(err.message);
            } finally {
                setLoading(false);
            }
        };

        loadStructure();
    }, [viewer, pdbId]);

    return (
        <div style={{ position: 'relative', width, height, ...style }}>
            {loading && <div style={styles.overlay}>Loading structure...</div>}
            {error && <div style={styles.overlay}>Error: {error}</div>}
            <div ref={viewerRef} style={{ width: '100%', height: '100%', position: 'relative' }} />
        </div>
    );
};

const styles = {
    overlay: {
        position: 'absolute', top: 0, left: 0, right: 0, bottom: 0,
        display: 'flex', alignItems: 'center', justifyContent: 'center',
        backgroundColor: 'rgba(255, 255, 255, 0.8)', zIndex: 10,
        color: '#333', fontWeight: 'bold'
    }
};

export default ProteinViewer;
```

## 3. API ë¬¸ì„œ (Usage)

### Props
| Prop Name | Type | Default | Description |
|-----------|------|---------|-------------|
| `pdbId` | `string` | **Required** | ì‹œê°í™”í•  ë‹¨ë°±ì§ˆì˜ PDB ID (ì˜ˆ: '1UBQ', '4HHB') |
| `width` | `string` | `'100%'` | ë·°ì–´ ì»¨í…Œì´ë„ˆ ë„ˆë¹„ |
| `height` | `string` | `'400px'` | ë·°ì–´ ì»¨í…Œì´ë„ˆ ë†’ì´ |
| `style` | `object` | `{}` | ì¶”ê°€ CSS ìŠ¤íƒ€ì¼ |

### ì‚¬ìš© ì˜ˆì‹œ
```jsx
import { ProteinViewer } from '../components';

// ...
<ProteinViewer 
    pdbId="1UBQ" 
    width="100%" 
    height="500px" 
/>
```